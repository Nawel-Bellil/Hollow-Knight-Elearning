<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-Learning Platform</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>E-Learning Platform</h1>
      <nav>
        <ul>
          <li><a href="#courses">Courses</a></li>
          <li><a href="#quizzes">Quizzes</a></li>
          <li><a href="#forums">Forums</a></li>
        </ul>
      </nav>
    </header>

    <section id="courses">
      <h2>Courses</h2>
      <div class="course-list">
        <div class="course-item">
          <h3>Course Title 1</h3>
          <p>Short description of the course.</p>
        </div>
        <div class="course-item">
          <h3>Course Title 2</h3>
          <p>Short description of the course.</p>
        </div>
        <!-- Add more courses as needed -->
      </div>

      <!-- Add Course Form -->
      <form id="add-course-form">
        <h3>Add Course</h3>
        <label for="course-title">Course Title:</label>
        <input type="text" id="course-title" name="course-title" required />
        <label for="course-description">Course Description:</label>
        <textarea
          id="course-description"
          name="course-description"
          required
        ></textarea>
        <label for="course-instructor">Course Instructor:</label>
        <input
          type="text"
          id="course-instructor"
          name="course-instructor"
          required
        />
        <button type="submit">Add Course</button>
      </form>
    </section>

    <section id="quizzes">
      <h2>Quizzes</h2>
      <div class="quiz-list">
        <div class="quiz-item">
          <h3>Quiz Title 1</h3>
          <p>Short description of the quiz.</p>
        </div>
        <div class="quiz-item">
          <h3>Quiz Title 2</h3>
          <p>Short description of the quiz.</p>
        </div>
        <!-- Add more quizzes as needed -->
      </div>

      <!-- Add Quiz Form -->
      <form id="add-quiz-form">
        <h3>Add Quiz</h3>
        <label for="quiz-title">Quiz Title:</label>
        <input type="text" id="quiz-title" name="quiz-title" required />
        <label for="quiz-description">Quiz Description:</label>
        <textarea
          id="quiz-description"
          name="quiz-description"
          required
        ></textarea>
        <button type="submit">Add Quiz</button>
      </form>
    </section>

    <section id="forums">
      <h2>Forums</h2>
      <div class="forum-list">
        <div class="forum-item">
          <h3>Forum Topic 1</h3>
          <p>Short description of the forum topic.</p>
        </div>
        <div class="forum-item">
          <h3>Forum Topic 2</h3>
          <p>Short description of the forum topic.</p>
        </div>
        <!-- Add more forums as needed -->
      </div>

      <!-- Add Forum Form -->
      <form id="add-forum-form">
        <h3>Add Forum</h3>
        <label for="forum-topic">Forum Topic:</label>
        <input type="text" id="forum-topic" name="forum-topic" required />
        <label for="forum-description">Forum Description:</label>
        <textarea
          id="forum-description"
          name="forum-description"
          required
        ></textarea>
        <button type="submit">Add Forum</button>
      </form>
    </section>

    <footer>
      <p>&copy; 2024 E-Learning Platform. All rights reserved.</p>
    </footer>

    <script>
      // Function to send a GraphQL request
      async function sendGraphQLRequest(query, variables) {
        const token = "your-jwt-token"; // Replace this with the actual token

        const response = await fetch("http://localhost:4000/graphql", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${token}`,
          },
          body: JSON.stringify({ query, variables }),
        });

        const result = await response.json();
        return result;
      }

      // Handle Add Course Form Submission
      document
        .getElementById("add-course-form")
        .addEventListener("submit", async (event) => {
          event.preventDefault();

          const title = document.getElementById("course-title").value;
          const description =
            document.getElementById("course-description").value;
          const instructor = document.getElementById("course-instructor").value;

          const query = `
                mutation AddCourse($title: String!, $description: String!, $instructor: String!) {
                    addCourse(input: { title: $title, description: $description, instructor: $instructor }) {
                        id
                        title
                    }
                }
            `;

          const variables = { title, description, instructor };
          const result = await sendGraphQLRequest(query, variables);

          console.log(result);
        });

      // Handle Add Quiz Form Submission
      document
        .getElementById("add-quiz-form")
        .addEventListener("submit", async (event) => {
          event.preventDefault();

          const title = document.getElementById("quiz-title").value;
          const description = document.getElementById("quiz-description").value;

          const query = `
                mutation AddQuiz($title: String!, $description: String!) {
                    addQuiz(input: { title: $title, description: $description }) {
                        id
                        title
                    }
                }
            `;

          const variables = { title, description };
          const result = await sendGraphQLRequest(query, variables);

          console.log(result);
        });

      // Handle Add Forum Form Submission
      document
        .getElementById("add-forum-form")
        .addEventListener("submit", async (event) => {
          event.preventDefault();

          const topic = document.getElementById("forum-topic").value;
          const description =
            document.getElementById("forum-description").value;

          const query = `
                mutation AddForum($topic: String!, $description: String!) {
                    addForum(input: { topic: $topic, description: $description }) {
                        id
                        topic
                    }
                }
            `;

          const variables = { topic, description };
          const result = await sendGraphQLRequest(query, variables);

          console.log(result);
        });
    </script>
  </body>
</html>
